<div id="<%= dom_id(card) %>" class="card<%= " pinned" if card.pinned? %><%= " archived" if card.archived? %>"
     data-controller="card-actions"
     data-card-actions-stash-url-value="<%= card_stash_path(card) %>"
     data-card-actions-pin-url-value="<%= card_pin_path(card) %>"
     data-card-actions-archive-url-value="<%= card_archive_path(card) %>"
     data-card-actions-delete-url-value="<%= card_path(card) %>">
  <div class="card-action">
    <% if card.cardable.completable? %>
      <% if card.cardable.done? %>
        <%= button_to card_completion_path(card), method: :delete, class: "completion-toggle done", aria: { label: "Mark undone" } do %>
          &#10003;
        <% end %>
      <% else %>
        <%= button_to card_completion_path(card), method: :post, class: "completion-toggle", aria: { label: "Mark done" } do %>
          &#9675;
        <% end %>
      <% end %>
    <% end %>
    <%= render card.cardable, card: card %>
  </div>
  <a class="card-body"
     href="<%= edit_card_path(card) %>"
     data-turbo-frame="modal"
     data-turbo-action="advance"
     data-action="dialog#open">
    <div class="card-meta">
      <span class="card-type"><%= card.cardable_type %></span>
      <% if card.pinned? %>
        <span class="pinned-badge">Pinned</span>
      <% end %>
    </div>
    <p class="card-title<%= " done" if card.cardable.completable? && card.cardable.done? %>">
      <%= card.title %>
    </p>
    <% if card.tags.any? %>
      <div class="card-tags">
        <% card.tags.each do |tag| %>
          <span class="tag-chip"><%= tag.name %></span>
        <% end %>
      </div>
    <% end %>
  </a>
  <div class="card-menu">
    <select data-action="change->card-actions#dispatch">
      <option value="">â‹¯</option>
      <option value="<%= card.stashed? ? 'unstash' : 'stash' %>"><%= card.stashed? ? "Unstash" : "Stash" %></option>
      <option value="<%= card.pinned? ? 'unpin' : 'pin' %>"><%= card.pinned? ? "Unpin" : "Pin" %></option>
      <option value="<%= card.archived? ? 'unarchive' : 'archive' %>"><%= card.archived? ? "Unarchive" : "Archive" %></option>
      <option value="delete">Delete</option>
    </select>
  </div>
</div>
